{{ define "productions_content" }}
{{ $sortField := .SortProducts.SortField }}
{{ $sortOrder := .SortProducts.SortOrder }}

<div class="d-flex justify-content-between align-items-center mt-2">
    <h1 class="h2 mb-3">{{ .Title }}</h1>
    <button class="btn btn-primary btn-lg" id="addProductionBtn"
            onclick="window.open('/aforms/productions/add', '_self')">
        <i class="bi bi-plus-circle"></i> –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ü–∏—é
    </button>
</div>


<!-- –ë–ª–æ–∫ –ø–æ–∏—Å–∫–∞ –≤—Å–µ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è -->
<div class="search-container mb-3">
    <form method="GET" action="/aforms/productions" class="row g-2" id="searchForm">
        <div class="col-auto">

            <!--            –ü–æ–∏—Å–∫ –ø–æ –ê–†–¢–ò–ö–£–õ–£ -->
            <label for="searchArticle" style="position: relative; display: inline-block;">
                <input type="text"
                       name="articles"
                       id="searchArticle"
                       class="form-control form-control-sm"
                       style="width: 15ch; padding-right: 15px;"
                       placeholder="–ü–æ–∏—Å–∫ –ø–æ –∞—Ä—Ç..."
                       value="{{ .SearchProducts.SearchArticle }}"
                       autocomplete="off"
                       maxlength="7">

                {{if .SearchProducts.SearchArticle }}
                <span id="clearSearchIconArticle"
                      style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #999; font-size: 14px;">
        ‚úó
    </span>
                {{end}}
            </label>

            <!--            –ü–û–ò–°–ö –ø–æ –ù–ê–ò–ú–ï–ù–û–í–ê–ù–ò–Æ –ü–†–û–î–£–ö–¶–ò–ò –î–õ–Ø –£–ü–ê–ö–û–í–©–ò–ö–û–í -->
            <label for="searchName" style="position: relative; display: inline-block;">
                <input type="text"
                       name="name"
                       id="searchName"
                       class="form-control form-control-sm"
                       style="width: 35ch; padding-right: 15px;"
                       placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—é –¥–ª—è —É–ø–∞–∫..."
                       value="{{ .SearchProducts.SearchName }}"
                       autocomplete="off"
                       maxlength="25">

                {{if .SearchProducts.SearchName }}
                <span id="clearSearchIconName"
                      style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #999; font-size: 14px;">
        ‚úó
    </span>
                {{end}}
            </label>

            <!--            –ü–û–ò–°–ö –ø–æ –ö–û–î–£ –ü–†–û–î–£–ö–¶–ò–ò -->
            <label for="searchIdProduction" style="position: relative; display: inline-block;">
                <input type="text"
                       name="idProduction"
                       id="searchIdProduction"
                       class="form-control form-control-sm"
                       style="width: 30ch; padding-right: 15px;"
                       placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É –ø—Ä–æ–¥—É–∫—Ü–∏–∏..."
                       value="{{ .SearchProducts.SearchId }}"
                       autocomplete="off"
                       maxlength="25">

                {{if .SearchProducts.SearchId }}
                <span id="clearSearchIconIdProduction"
                      style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #999; font-size: 14px;">
        ‚úó
    </span>
                {{end}}
            </label>

        </div>
    </form>

    {{ if and .IsSearch (ne .SearchProducts.SearchArticle "") }}
    <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –µ—Å—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å -->
    <div class="alert {{ if eq (len .Productions) 0 }}alert-warning{{ else }}alert-info{{ end }} mt-2 py-1 px-3">
        <i class="bi bi-{{ if eq (len .Productions) 0 }}exclamation-triangle{{ else }}info-circle{{ end }}"></i>
        {{ if eq (len .Productions) 0 }}
        –ü–æ –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
        {{ else }}
        –ü–æ –∑–∞–ø—Ä–æ—Å—É –Ω–∞–π–¥–µ–Ω–æ: {{ len .Productions }} –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —É–ø–∞–∫–æ–≤–∫–∏
        {{ end }}
    </div>
    {{ end }}
</div>

<!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å —Ç–∞–±–ª–∏—Ü–µ–π - –≤—Å–µ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º -->
<div class="card shadow-sm">
    <div class="card-body p-0">

        <div class="table-responsive" style="min-width: 1200px;">

            <!-- –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–∫—Ä–æ–ª–ª–∞ -->
            <div style="height: calc(100vh - 400px); overflow-y: auto; position:relative;">
                <table class="table table-hover mb-0" style="min-width: 1200px;" id="productionsTable">

                    <colgroup>
                        <col style="width: 68px">
                        <col style="width: 550px">
                        <col style="width: 500px">
                        <col style="width: 120px">
                        <col style="width: 60px">
                        <col style="width: 60px">
                        <col style="width: 100px">
                        <col style="width: 80px">
                        <col style="width: 110px">
                    </colgroup>

                    <thead class="table-light"
                           style="position: sticky; top: 0; z-index: 10; background-color: #f8f9fa;">
                    <tr>

                        <th class="text-nowrap sortable-header" style="position: relative; padding-bottom: 13px;">
                            <a href="?sort=PrArticle&order={{ if eq $sortField `PrArticle` }}{{ if eq $sortOrder `ASC` }}DESC{{ else }}ASC{{ end }}{{ else }}ASC{{ end }}"
                               class="text-decoration-none text-dark d-block w-100 h-100">
                                –ê—Ä—Ç–∏–∫—É–ª
                                {{ if eq $sortField "PrArticle" }}
                                <span class="sort-indicator">
                                    {{ if eq $sortOrder "ASC" }}‚Üë{{ else }}‚Üì{{ end }}
                                </span>
                                {{ end }}
                            </a>
                        </th>

                        <th class="text-nowrap sortable-header" style="position: relative; padding-bottom: 13px;">
                            <a href="?sort=PrPackName&order={{ if eq $sortField `PrPackName` }}{{ if eq $sortOrder `ASC` }}DESC{{ else }}ASC{{ end }}{{ else }}ASC{{ end }}"
                               class="text-decoration-none text-dark d-block w-100 h-100">
                                –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –¥–ª—è —É–ø–∞–∫–æ–≤—â–∏–∫–∞
                                {{ if eq $sortField "PrPackName" }}
                                <span class="sort-indicator">
                                    {{ if eq $sortOrder "ASC" }}‚Üë{{ else }}‚Üì{{ end }}
                                </span>
                                {{ end }}
                            </a>
                        </th>

                        <th class="text-nowrap sortable-header" style="position: relative; padding-bottom: 13px;">
                            <a href="?sort=PrShortName&order={{ if eq $sortField `PrShortName` }}{{ if eq $sortOrder `ASC` }}DESC{{ else }}ASC{{ end }}{{ else }}ASC{{ end }}"
                               class="text-decoration-none text-dark d-block w-100 h-100">
                                –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –¥–ª—è —ç—Ç–∏–∫–µ—Ç–∫–∏
                                {{ if eq $sortField "PrShortName" }}
                                <span class="sort-indicator">
                                    {{ if eq $sortOrder "ASC" }}‚Üë{{ else }}‚Üì{{ end }}
                                </span>
                                {{ end }}
                            </a>
                        </th>

                        <th class="text-nowrap sortable-header text-center"
                            style="position: relative; padding-bottom: 13px;">
                            <a href="?sort=PrColor&order={{ if eq $sortField `PrColor` }}{{ if eq $sortOrder `ASC` }}DESC{{ else }}ASC{{ end }}{{ else }}ASC{{ end }}"
                               class="text-decoration-none text-dark d-block w-100 h-100">
                                –¶–≤–µ—Ç
                                {{ if eq $sortField "PrColor" }}
                                <span class="sort-indicator">
                                    {{ if eq $sortOrder "ASC" }}‚Üë{{ else }}‚Üì{{ end }}
                                </span>
                                {{ end }}
                            </a>
                        </th>

                        <th class="text-nowrap sortable-header text-center" style="position: relative;">
                            <a href="?sort=PrRows&order={{ if eq $sortField `PrRows` }}{{ if eq $sortOrder `ASC` }}DESC{{ else }}ASC{{ end }}{{ else }}ASC{{ end }}"
                               class="text-decoration-none text-dark d-block w-100 h-100">
                                –ö–æ–ª-–≤–æ <br> —Ä—è–¥–æ–≤
                                {{ if eq $sortField "PrRows" }}
                                <span class="sort-indicator">
                                    {{ if eq $sortOrder "ASC" }}‚Üë{{ else }}‚Üì{{ end }}
                                </span>
                                {{ end }}
                            </a>
                        </th>

                        <th class="text-nowrap sortable-header text-center" style="position: relative;">
                            <a href="?sort=PrCount&order={{ if eq $sortField `PrCount` }}{{ if eq $sortOrder `ASC` }}DESC{{ else }}ASC{{ end }}{{ else }}ASC{{ end }}"
                               class="text-decoration-none text-dark d-block w-100 h-100">
                                –ö–æ–ª-–≤–æ <br> –≤ —Ä—è–¥—É
                                {{ if eq $sortField "PrCount" }}
                                <span class="sort-indicator">
                                    {{ if eq $sortOrder "ASC" }}‚Üë{{ else }}‚Üì{{ end }}
                                </span>
                                {{ end }}
                            </a>
                        </th>

                        <th class="text-nowrap text-center text-dark">–ì–∞–±–∞—Ä–∏—Ç—ã <br> —É–ø–∞–∫–æ–≤–∫–∏</th>

                        <th class="text-nowrap sortable-header text-center" style="position: relative;">
                            <a href="?sort=idProduction&order={{ if eq $sortField `idProduction` }}{{ if eq $sortOrder `ASC` }}DESC{{ else }}ASC{{ end }}{{ else }}ASC{{ end }}"
                               class="text-decoration-none text-dark d-block w-100 h-100">
                                –ö–æ–¥ <br> –ø—Ä–æ–¥—É–∫—Ü–∏–∏
                                {{ if eq $sortField "idProduction" }}
                                <span class="sort-indicator">
                                    {{ if eq $sortOrder "ASC" }}‚Üë{{ else }}‚Üì{{ end }}
                                </span>
                                {{ end }}
                            </a>
                        </th>

                        <th class="text-nowrap sortable-header text-center" style="position: relative;">
                            <a href="?sort=PrEditDate&order={{ if eq $sortField `PrEditDate` }}{{ if eq $sortOrder `ASC` }}DESC{{ else }}ASC{{ end }}{{ else }}ASC{{ end }}"
                               class="text-decoration-none text-dark d-block w-100 h-100">
                                –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è <br> –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
                                {{ if eq $sortField "PrEditDate" }}
                                <span class="sort-indicator">
                                    {{ if eq $sortOrder "ASC" }}‚Üë{{ else }}‚Üì{{ end }}
                                </span>
                                {{ end }}
                            </a>
                        </th>

                        <th class="text-nowrap text-center" style="padding-bottom: 13px;">–û–ø–µ—Ä–∞—Ü–∏–∏</th>

                    </tr>
                    </thead>
                    <tbody>

                    {{ range .Productions }}
                    <tr>
                        <td>{{ .PrArticle }}</td>
                        <td>{{ .PrPackName }}</td>
                        <td>{{ .PrShortName }}</td>
                        <td class="text-center">{{ .PrColor }}</td>
                        <td class="text-center">{{ .PrRows }}</td>
                        <td class="text-center">{{ .PrCount }}</td>
                        <td class="text-center">{{ .PrHWD }}</td>
                        <td class="text-center">{{ .IdProduction }}</td>
                        <td>{{ formatDateTime .PrEditDate }}</td>

                        <!-- –ö–Ω–æ–ø–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π -->
                        <td>
                            <div class="d-flex justify-content-center gap-1">
                                <!-- –ö–Ω–æ–ø–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
                                <button class="btn btn-sm btn-outline-primary edit-btn px-1 py-1"
                                        title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
                                        onclick="window.open('/aforms/productions/upd?idProduction={{ .IdProduction }}', '_self')">
                                    <span>‚úèÔ∏è</span>
                                </button>
                                <button class="btn btn-sm btn-outline-success copy-btn px-2 py-1"
                                        title="–°–æ–∑–¥–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–π –∑–∞–ø–∏—Å–∏"
                                        onclick="window.open('/aforms/productions/add?basedOn={{ .IdProduction }}', '_self')">
                                    <span>üìã</span>
                                </button>
                            </div>
                        </td>

                    </tr>
                    {{ end }}

                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="alert {{ if eq (len .Productions) 0 }}alert-warning{{ else }}alert-info{{ end }} mt-2 py-1 px-3">
    <i class="bi bi-{{ if eq (len .Productions) 0 }}exclamation-triangle{{ else }}info-circle{{ end }}"></i>
    –í—Å–µ–≥–æ: {{ len .Productions }}
    <!--    –í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ: {{ len .Productions }} –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —É–ø–∞–∫–æ–≤–∫–∏-->
</div>

{{ end }}